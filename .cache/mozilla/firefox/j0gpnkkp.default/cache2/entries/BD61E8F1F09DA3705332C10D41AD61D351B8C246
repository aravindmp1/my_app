(function() {
  var CSRFToken, Click, ComponentUrl, EVENTS, Link, browserCompatibleDocumentParser, browserIsntBuggy, browserSupportsCustomEvents, browserSupportsPushState, browserSupportsTurbolinks, bypassOnLoadPopstate, cacheCurrentPage, cacheSize, changePage, clone, constrainPageCacheTo, createDocument, currentState, enableTransitionCache, executeScriptTags, extractTitleAndBody, fetch, fetchHistory, fetchReplacement, historyStateIsDefined, initializeTurbolinks, installDocumentReadyPageEventTriggers, installHistoryChangeHandler, installJqueryAjaxSuccessPageUpdateTrigger, loadedAssets, manuallyTriggerHashChangeForFirefox, pageCache, pageChangePrevented, pagesCached, popCookie, processResponse, recallScrollPosition, ref, referer, reflectNewUrl, reflectRedirectedUrl, rememberCurrentState, rememberCurrentUrl, rememberReferer, removeNoscriptTags, requestMethodIsSafe, resetScrollPosition, setAutofocusElement, transitionCacheEnabled, transitionCacheFor, triggerEvent, visit, xhr,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  pageCache = {};

  cacheSize = 10;

  transitionCacheEnabled = false;

  currentState = null;

  loadedAssets = null;

  referer = null;

  createDocument = null;

  xhr = null;

  EVENTS = {
    BEFORE_CHANGE: 'page:before-change',
    FETCH: 'page:fetch',
    RECEIVE: 'page:receive',
    CHANGE: 'page:change',
    UPDATE: 'page:update',
    LOAD: 'page:load',
    RESTORE: 'page:restore',
    BEFORE_UNLOAD: 'page:before-unload',
    EXPIRE: 'page:expire'
  };

  fetch = function(url) {
    var cachedPage;
    url = new ComponentUrl(url);
    rememberReferer();
    cacheCurrentPage();
    if (transitionCacheEnabled && (cachedPage = transitionCacheFor(url.absolute))) {
      fetchHistory(cachedPage);
      return fetchReplacement(url);
    } else {
      return fetchReplacement(url, resetScrollPosition);
    }
  };

  transitionCacheFor = function(url) {
    var cachedPage;
    cachedPage = pageCache[url];
    if (cachedPage && !cachedPage.transitionCacheDisabled) {
      return cachedPage;
    }
  };

  enableTransitionCache = function(enable) {
    if (enable == null) {
      enable = true;
    }
    return transitionCacheEnabled = enable;
  };

  fetchReplacement = function(url, onLoadFunction) {
    if (onLoadFunction == null) {
      onLoadFunction = (function(_this) {
        return function() {};
      })(this);
    }
    triggerEvent(EVENTS.FETCH, {
      url: url.absolute
    });
    if (xhr != null) {
      xhr.abort();
    }
    xhr = new XMLHttpRequest;
    xhr.open('GET', url.withoutHashForIE10compatibility(), true);
    xhr.setRequestHeader('Accept', 'text/html, application/xhtml+xml, application/xml');
    xhr.setRequestHeader('X-XHR-Referer', referer);
    xhr.onload = function() {
      var doc;
      triggerEvent(EVENTS.RECEIVE, {
        url: url.absolute
      });
      if (doc = processResponse()) {
        reflectNewUrl(url);
        changePage.apply(null, extractTitleAndBody(doc));
        manuallyTriggerHashChangeForFirefox();
        reflectRedirectedUrl();
        onLoadFunction();
        return triggerEvent(EVENTS.LOAD);
      } else {
        return document.location.href = url.absolute;
      }
    };
    xhr.onloadend = function() {
      return xhr = null;
    };
    xhr.onerror = function() {
      return document.location.href = url.absolute;
    };
    return xhr.send();
  };

  fetchHistory = function(cachedPage) {
    if (xhr != null) {
      xhr.abort();
    }
    changePage(cachedPage.title, cachedPage.body);
    recallScrollPosition(cachedPage);
    return triggerEvent(EVENTS.RESTORE);
  };

  cacheCurrentPage = function() {
    var currentStateUrl;
    currentStateUrl = new ComponentUrl(currentState.url);
    pageCache[currentStateUrl.absolute] = {
      url: currentStateUrl.relative,
      body: document.body,
      title: document.title,
      positionY: window.pageYOffset,
      positionX: window.pageXOffset,
      cachedAt: new Date().getTime(),
      transitionCacheDisabled: document.querySelector('[data-no-transition-cache]') != null
    };
    return constrainPageCacheTo(cacheSize);
  };

  pagesCached = function(size) {
    if (size == null) {
      size = cacheSize;
    }
    if (/^[\d]+$/.test(size)) {
      return cacheSize = parseInt(size);
    }
  };

  constrainPageCacheTo = function(limit) {
    var cacheTimesRecentFirst, i, key, len, pageCacheKeys, results;
    pageCacheKeys = Object.keys(pageCache);
    cacheTimesRecentFirst = pageCacheKeys.map(function(url) {
      return pageCache[url].cachedAt;
    }).sort(function(a, b) {
      return b - a;
    });
    results = [];
    for (i = 0, len = pageCacheKeys.length; i < len; i++) {
      key = pageCacheKeys[i];
      if (!(pageCache[key].cachedAt <= cacheTimesRecentFirst[limit])) {
        continue;
      }
      triggerEvent(EVENTS.EXPIRE, pageCache[key]);
      results.push(delete pageCache[key]);
    }
    return results;
  };

  changePage = function(title, body, csrfToken, runScripts) {
    triggerEvent(EVENTS.BEFORE_UNLOAD);
    document.title = title;
    document.documentElement.replaceChild(body, document.body);
    if (csrfToken != null) {
      CSRFToken.update(csrfToken);
    }
    setAutofocusElement();
    if (runScripts) {
      executeScriptTags();
    }
    currentState = window.history.state;
    triggerEvent(EVENTS.CHANGE);
    return triggerEvent(EVENTS.UPDATE);
  };

  executeScriptTags = function() {
    var attr, copy, i, j, len, len1, nextSibling, parentNode, ref, ref1, script, scripts;
    scripts = Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'));
    for (i = 0, len = scripts.length; i < len; i++) {
      script = scripts[i];
      if (!((ref = script.type) === '' || ref === 'text/javascript')) {
        continue;
      }
      copy = document.createElement('script');
      ref1 = script.attributes;
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        attr = ref1[j];
        copy.setAttribute(attr.name, attr.value);
      }
      if (!script.hasAttribute('async')) {
        copy.async = false;
      }
      copy.appendChild(document.createTextNode(script.innerHTML));
      parentNode = script.parentNode, nextSibling = script.nextSibling;
      parentNode.removeChild(script);
      parentNode.insertBefore(copy, nextSibling);
    }
  };

  removeNoscriptTags = function(node) {
    node.innerHTML = node.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/ig, '');
    return node;
  };

  setAutofocusElement = function() {
    var autofocusElement, list;
    autofocusElement = (list = document.querySelectorAll('input[autofocus], textarea[autofocus]'))[list.length - 1];
    if (autofocusElement && document.activeElement !== autofocusElement) {
      return autofocusElement.focus();
    }
  };

  reflectNewUrl = function(url) {
    if ((url = new ComponentUrl(url)).absolute !== referer) {
      return window.history.pushState({
        turbolinks: true,
        url: url.absolute
      }, '', url.absolute);
    }
  };

  reflectRedirectedUrl = function() {
    var location, preservedHash;
    if (location = xhr.getResponseHeader('X-XHR-Redirected-To')) {
      location = new ComponentUrl(location);
      preservedHash = location.hasNoHash() ? document.location.hash : '';
      return window.history.replaceState(currentState, '', location.href + preservedHash);
    }
  };

  rememberReferer = function() {
    return referer = document.location.href;
  };

  rememberCurrentUrl = function() {
    return window.history.replaceState({
      turbolinks: true,
      url: document.location.href
    }, '', document.location.href);
  };

  rememberCurrentState = function() {
    return currentState = window.history.state;
  };

  manuallyTriggerHashChangeForFirefox = function() {
    var url;
    if (navigator.userAgent.match(/Firefox/) && !(url = new ComponentUrl).hasNoHash()) {
      window.history.replaceState(currentState, '', url.withoutHash());
      return document.location.hash = url.hash;
    }
  };

  recallScrollPosition = function(page) {
    return window.scrollTo(page.positionX, page.positionY);
  };

  resetScrollPosition = function() {
    if (document.location.hash) {
      return document.location.href = document.location.href;
    } else {
      return window.scrollTo(0, 0);
    }
  };

  clone = function(original) {
    var copy, key, value;
    if ((original == null) || typeof original !== 'object') {
      return original;
    }
    copy = new original.constructor();
    for (key in original) {
      value = original[key];
      copy[key] = clone(value);
    }
    return copy;
  };

  popCookie = function(name) {
    var ref, value;
    value = ((ref = document.cookie.match(new RegExp(name + "=(\\w+)"))) != null ? ref[1].toUpperCase() : void 0) || '';
    document.cookie = name + '=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/';
    return value;
  };

  triggerEvent = function(name, data) {
    var event;
    if (typeof Prototype !== 'undefined') {
      Event.fire(document, name, data, true);
    }
    event = document.createEvent('Events');
    if (data) {
      event.data = data;
    }
    event.initEvent(name, true, true);
    return document.dispatchEvent(event);
  };

  pageChangePrevented = function(url) {
    return !triggerEvent(EVENTS.BEFORE_CHANGE, {
      url: url
    });
  };

  processResponse = function() {
    var assetsChanged, clientOrServerError, doc, extractTrackAssets, intersection, validContent;
    clientOrServerError = function() {
      var ref;
      return (400 <= (ref = xhr.status) && ref < 600);
    };
    validContent = function() {
      var contentType;
      return ((contentType = xhr.getResponseHeader('Content-Type')) != null) && contentType.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/);
    };
    extractTrackAssets = function(doc) {
      var i, len, node, ref, results;
      ref = doc.querySelector('head').childNodes;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        node = ref[i];
        if ((typeof node.getAttribute === "function" ? node.getAttribute('data-turbolinks-track') : void 0) != null) {
          results.push(node.getAttribute('src') || node.getAttribute('href'));
        }
      }
      return results;
    };
    assetsChanged = function(doc) {
      var fetchedAssets;
      loadedAssets || (loadedAssets = extractTrackAssets(document));
      fetchedAssets = extractTrackAssets(doc);
      return fetchedAssets.length !== loadedAssets.length || intersection(fetchedAssets, loadedAssets).length !== loadedAssets.length;
    };
    intersection = function(a, b) {
      var i, len, ref, results, value;
      if (a.length > b.length) {
        ref = [b, a], a = ref[0], b = ref[1];
      }
      results = [];
      for (i = 0, len = a.length; i < len; i++) {
        value = a[i];
        if (indexOf.call(b, value) >= 0) {
          results.push(value);
        }
      }
      return results;
    };
    if (!clientOrServerError() && validContent()) {
      doc = createDocument(xhr.responseText);
      if (doc && !assetsChanged(doc)) {
        return doc;
      }
    }
  };

  extractTitleAndBody = function(doc) {
    var title;
    title = doc.querySelector('title');
    return [title != null ? title.textContent : void 0, removeNoscriptTags(doc.querySelector('body')), CSRFToken.get(doc).token, 'runScripts'];
  };

  CSRFToken = {
    get: function(doc) {
      var tag;
      if (doc == null) {
        doc = document;
      }
      return {
        node: tag = doc.querySelector('meta[name="csrf-token"]'),
        token: tag != null ? typeof tag.getAttribute === "function" ? tag.getAttribute('content') : void 0 : void 0
      };
    },
    update: function(latest) {
      var current;
      current = this.get();
      if ((current.token != null) && (latest != null) && current.token !== latest) {
        return current.node.setAttribute('content', latest);
      }
    }
  };

  browserCompatibleDocumentParser = function() {
    var buildTestsUsing, createDocumentUsingDOM, createDocumentUsingFragment, createDocumentUsingParser, createDocumentUsingWrite, docTest, docTests, e, i, len;
    createDocumentUsingParser = function(html) {
      return (new DOMParser).parseFromString(html, 'text/html');
    };
    createDocumentUsingDOM = function(html) {
      var doc;
      doc = document.implementation.createHTMLDocument('');
      doc.documentElement.innerHTML = html;
      return doc;
    };
    createDocumentUsingWrite = function(html) {
      var doc;
      doc = document.implementation.createHTMLDocument('');
      doc.open('replace');
      doc.write(html);
      doc.close();
      return doc;
    };
    createDocumentUsingFragment = function(html) {
      var body, doc, head, htmlWrapper, ref, ref1;
      head = ((ref = html.match(/<head[^>]*>([\s\S.]*)<\/head>/i)) != null ? ref[0] : void 0) || '<head></head>';
      body = ((ref1 = html.match(/<body[^>]*>([\s\S.]*)<\/body>/i)) != null ? ref1[0] : void 0) || '<body></body>';
      htmlWrapper = document.createElement('html');
      htmlWrapper.innerHTML = head + body;
      doc = document.createDocumentFragment();
      doc.appendChild(htmlWrapper);
      return doc;
    };
    buildTestsUsing = function(createMethod) {
      var buildTest, formNestingTest, structureTest;
      buildTest = function(fallback, passes) {
        return {
          passes: passes(),
          fallback: fallback
        };
      };
      structureTest = buildTest(createDocumentUsingWrite, (function(_this) {
        return function() {
          var ref, ref1;
          return ((ref = createMethod('<html><body><p>test')) != null ? (ref1 = ref.body) != null ? ref1.childNodes.length : void 0 : void 0) === 1;
        };
      })(this));
      formNestingTest = buildTest(createDocumentUsingFragment, (function(_this) {
        return function() {
          var ref, ref1;
          return ((ref = createMethod('<html><body><form></form><div></div></body></html>')) != null ? (ref1 = ref.body) != null ? ref1.childNodes.length : void 0 : void 0) === 2;
        };
      })(this));
      return [structureTest, formNestingTest];
    };
    try {
      if (window.DOMParser) {
        docTests = buildTestsUsing(createDocumentUsingParser);
        return createDocumentUsingParser;
      }
    } catch (_error) {
      e = _error;
      docTests = buildTestsUsing(createDocumentUsingDOM);
      return createDocumentUsingDOM;
    } finally {
      for (i = 0, len = docTests.length; i < len; i++) {
        docTest = docTests[i];
        if (!docTest.passes) {
          return docTest.fallback;
        }
      }
    }
  };

  ComponentUrl = (function() {
    function ComponentUrl(original1) {
      this.original = original1 != null ? original1 : document.location.href;
      if (this.original.constructor === ComponentUrl) {
        return this.original;
      }
      this._parse();
    }

    ComponentUrl.prototype.withoutHash = function() {
      return this.href.replace(this.hash, '').replace('#', '');
    };

    ComponentUrl.prototype.withoutHashForIE10compatibility = function() {
      return this.withoutHash();
    };

    ComponentUrl.prototype.hasNoHash = function() {
      return this.hash.length === 0;
    };

    ComponentUrl.prototype._parse = function() {
      var ref;
      (this.link != null ? this.link : this.link = document.createElement('a')).href = this.original;
      ref = this.link, this.href = ref.href, this.protocol = ref.protocol, this.host = ref.host, this.hostname = ref.hostname, this.port = ref.port, this.pathname = ref.pathname, this.search = ref.search, this.hash = ref.hash;
      this.origin = [this.protocol, '//', this.hostname].join('');
      if (this.port.length !== 0) {
        this.origin += ":" + this.port;
      }
      this.relative = [this.pathname, this.search, this.hash].join('');
      return this.absolute = this.href;
    };

    return ComponentUrl;

  })();

  Link = (function(superClass) {
    extend(Link, superClass);

    Link.HTML_EXTENSIONS = ['html'];

    Link.allowExtensions = function() {
      var extension, extensions, i, len;
      extensions = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      for (i = 0, len = extensions.length; i < len; i++) {
        extension = extensions[i];
        Link.HTML_EXTENSIONS.push(extension);
      }
      return Link.HTML_EXTENSIONS;
    };

    function Link(link1) {
      this.link = link1;
      if (this.link.constructor === Link) {
        return this.link;
      }
      this.original = this.link.href;
      this.originalElement = this.link;
      this.link = this.link.cloneNode(false);
      Link.__super__.constructor.apply(this, arguments);
    }

    Link.prototype.shouldIgnore = function() {
      return this._crossOrigin() || this._anchored() || this._nonHtml() || this._optOut() || this._target();
    };

    Link.prototype._crossOrigin = function() {
      return this.origin !== (new ComponentUrl).origin;
    };

    Link.prototype._anchored = function() {
      return (this.hash.length > 0 || this.href.charAt(this.href.length - 1) === '#') && (this.withoutHash() === (new ComponentUrl).withoutHash());
    };

    Link.prototype._nonHtml = function() {
      return this.pathname.match(/\.[a-z]+$/g) && !this.pathname.match(new RegExp("\\.(?:" + (Link.HTML_EXTENSIONS.join('|')) + ")?$", 'g'));
    };

    Link.prototype._optOut = function() {
      var ignore, link;
      link = this.originalElement;
      while (!(ignore || link === document)) {
        ignore = link.getAttribute('data-no-turbolink') != null;
        link = link.parentNode;
      }
      return ignore;
    };

    Link.prototype._target = function() {
      return this.link.target.length !== 0;
    };

    return Link;

  })(ComponentUrl);

  Click = (function() {
    Click.installHandlerLast = function(event) {
      if (!event.defaultPrevented) {
        document.removeEventListener('click', Click.handle, false);
        return document.addEventListener('click', Click.handle, false);
      }
    };

    Click.handle = function(event) {
      return new Click(event);
    };

    function Click(event1) {
      this.event = event1;
      if (this.event.defaultPrevented) {
        return;
      }
      this._extractLink();
      if (this._validForTurbolinks()) {
        if (!pageChangePrevented(this.link.absolute)) {
          visit(this.link.href);
        }
        this.event.preventDefault();
      }
    }

    Click.prototype._extractLink = function() {
      var link;
      link = this.event.target;
      while (!(!link.parentNode || link.nodeName === 'A')) {
        link = link.parentNode;
      }
      if (link.nodeName === 'A' && link.href.length !== 0) {
        return this.link = new Link(link);
      }
    };

    Click.prototype._validForTurbolinks = function() {
      return (this.link != null) && !(this.link.shouldIgnore() || this._nonStandardClick());
    };

    Click.prototype._nonStandardClick = function() {
      return this.event.which > 1 || this.event.metaKey || this.event.ctrlKey || this.event.shiftKey || this.event.altKey;
    };

    return Click;

  })();

  bypassOnLoadPopstate = function(fn) {
    return setTimeout(fn, 500);
  };

  installDocumentReadyPageEventTriggers = function() {
    return document.addEventListener('DOMContentLoaded', (function() {
      triggerEvent(EVENTS.CHANGE);
      return triggerEvent(EVENTS.UPDATE);
    }), true);
  };

  installJqueryAjaxSuccessPageUpdateTrigger = function() {
    if (typeof jQuery !== 'undefined') {
      return jQuery(document).on('ajaxSuccess', function(event, xhr, settings) {
        if (!jQuery.trim(xhr.responseText)) {
          return;
        }
        return triggerEvent(EVENTS.UPDATE);
      });
    }
  };

  installHistoryChangeHandler = function(event) {
    var cachedPage, ref;
    if ((ref = event.state) != null ? ref.turbolinks : void 0) {
      if (cachedPage = pageCache[(new ComponentUrl(event.state.url)).absolute]) {
        cacheCurrentPage();
        return fetchHistory(cachedPage);
      } else {
        return visit(event.target.location.href);
      }
    }
  };

  initializeTurbolinks = function() {
    rememberCurrentUrl();
    rememberCurrentState();
    createDocument = browserCompatibleDocumentParser();
    document.addEventListener('click', Click.installHandlerLast, true);
    window.addEventListener('hashchange', function(event) {
      rememberCurrentUrl();
      return rememberCurrentState();
    }, false);
    return bypassOnLoadPopstate(function() {
      return window.addEventListener('popstate', installHistoryChangeHandler, false);
    });
  };

  historyStateIsDefined = window.history.state !== void 0 || navigator.userAgent.match(/Firefox\/2[6|7]/);

  browserSupportsPushState = window.history && window.history.pushState && window.history.replaceState && historyStateIsDefined;

  browserIsntBuggy = !navigator.userAgent.match(/CriOS\//);

  requestMethodIsSafe = (ref = popCookie('request_method')) === 'GET' || ref === '';

  browserSupportsTurbolinks = browserSupportsPushState && browserIsntBuggy && requestMethodIsSafe;

  browserSupportsCustomEvents = document.addEventListener && document.createEvent;

  if (browserSupportsCustomEvents) {
    installDocumentReadyPageEventTriggers();
    installJqueryAjaxSuccessPageUpdateTrigger();
  }

  if (browserSupportsTurbolinks) {
    visit = fetch;
    initializeTurbolinks();
  } else {
    visit = function(url) {
      return document.location.href = url;
    };
  }

  this.Turbolinks = {
    visit: visit,
    pagesCached: pagesCached,
    enableTransitionCache: enableTransitionCache,
    allowLinkExtensions: Link.allowExtensions,
    supported: browserSupportsTurbolinks,
    EVENTS: clone(EVENTS)
  };

}).call(this);
        20180313132747                                          @  >W      ( f u n c t i o n ( )   { 
     v a r   C S R F T o k e n ,   C l i c k ,   C o m p o n e n t U r l ,   E V E N T S ,   L i n k ,   b r o w s e r C o m p a t i b l e D o c u m e n t P a r s e r ,   b r o w s e r I s n t B u g g y ,   b r o w s e r S u p p o r t s C u s t o m E v e n t s ,   b r o w s e r S u p p o r t s P u s h S t a t e ,   b r o w s e r S u p p o r t s T u r b o l i n k s ,   b y p a s s O n L o a d P o p s t a t e ,   c a c h e C u r r e n t P a g e ,   c a c h e S i z e ,   c h a n g e P a g e ,   c l o n e ,   c o n s t r a i n P a g e C a c h e T o ,   c r e a t e D o c u m e n t ,   c u r r e n t S t a t e ,   e n a b l e T r a n s i t i o n C a c h e ,   e x e c u t e S c r i p t T a g s ,   e x t r a c t T i t l e A n d B o d y ,   f e t c h ,   f e t c h H i s t o r y ,   f e t c h R e p l a c e m e n t ,   h i s t o r y S t a t e I s D e f i n e d ,   i n i t i a l i z e T u r b o l i n k s ,   i n s t a l l D o c u m e n t R e a d y P a g e E v e n t T r i g g e r s ,   i n s t a l l H i s t o r y C h a n g e H a n d l e r ,   i n s t a l l J q u e r y A j a x S u c c e s s P a g e U p d a t e T r i g g e r ,   l o a d e d A s s e t s ,   m a n u a l l y T r i g g e r H a s h C h a n g e F o r F i r e f o x ,   p a g e C a c h e ,   p a g e C h a n g e P r e v e n t e d ,   p a g e s C a c h e d ,   p o p C o o k i e ,   p r o c e s s R e s p o n s e ,   r e c a l l S c r o l l P o s i t i o n ,   r e f ,   r e f e r e r ,   r e f l e c t N e w U r l ,   r e f l e c t R e d i r e c t e d U r l ,   r e m e m b e r C u r r e n t S t a t e ,   r e m e m b e r C u r r e n t U r l ,   r e m e m b e r R e f e r e r ,   r e m o v e N o s c r i p t T a g s ,   r e q u e s t M e t h o d I s S a f e ,   r e s e t S c r o l l P o s i t i o n ,   s e t A u t o f o c u s E l e m e n t ,   t r a n s i t i o n C a c h e E n a b l e d ,   t r a n s i t i o n C a c h e F o r ,   t r i g g e r E v e n t ,   v i s i t ,   x h r , 
         i n d e x O f   =   [ ] . i n d e x O f   | |   f u n c t i o n ( i t e m )   {   f o r   ( v a r   i   =   0 ,   l   =   t h i s . l e n g t h ;   i   <   l ;   i + + )   {   i f   ( i   i n   t h i s   & &   t h i s [ i ]   = = =   i t e m )   r e t u r n   i ;   }   r e t u r n   - 1 ;   } , 
         e x t e n d   =   f u n c t i o n ( c h i l d ,   p a r e n t )   {   f o r   ( v a r   k e y   i n   p a r e n t )   {   i f   ( h a s P r o p . c a l l ( p a r e n t ,   k e y ) )   c h i l d [ k e y ]   =   p a r e n t [ k e y ] ;   }   f u n c t i o n   c t o r ( )   {   t h i s . c o n s t r u c t o r   =   c h i l d ;   }   c t o r . p r o t o t y p e   =   p a r e n t . p r o t o t y p e ;   c h i l d . p r o t o t y p e   =   n e w   c t o r ( ) ;   c h i l d . _ _ s u p e r _ _   =   p a r e n t . p r o t o t y p e ;   r e t u r n   c h i l d ;   } , 
         h a s P r o p   =   { } . h a s O w n P r o p e r t y , 
         s l i c e   =   [ ] . s l i c e ; 
 
     p a g e C a c h e   =   { } ; 
 
     c a c h e S i z e   =   1 0 ; 
 
     t r a n s i t i o n C a c h e E n a b l e d   =   f a l s e ; 
 
     c u r r e n t S t a t e   =   n u l l ; 
 
     l o a d e d A s s e t s   =   n u l l ; 
 
     r e f e r e r   =   n u l l ; 
 
     c r e a t e D o c u m e n t   =   n u l l ; 
 
     x h r   =   n u l l ; 
 
     E V E N T S   =   { 
         B E F O R E _ C H A N G E :   ' p a g e : b e f o r e - c h a n g e ' , 
         F E T C H :   ' p a g e : f e t c h ' , 
         R E C E I V E :   ' p a g e : r e c e i v e ' , 
         C H A N G E :   ' p a g e : c h a n g e ' , 
         U P D A T E :   ' p a g e : u p d a t e ' , 
         L O A D :   ' p a g e : l o a d ' , 
         R E S T O R E :   ' p a g e : r e s t o r e ' , 
         B E F O R E _ U N L O A D :   ' p a g e : b e f o r e - u n l o a d ' , 
         E X P I R E :   ' p a g e : e x p i r e ' 
     } ; 
 
     f e t c h   =   f u n c t i o n ( u r l )   { 
         v a r   c a c h e d P a g e ; 
         u r l   =   n e w   C o m p o n e n t U r l ( u r l ) ; 
         r e m e m b e r R e f e r e r ( ) ; 
         c a c h e C u r r e n t P a g e ( ) ; 
         i f   ( t r a n s i t i o n C a c h e E n a b l e d   & &   ( c a c h e d P a g e   =   t r a n s i t i o n C a c h e F o r ( u r l . a b s o l u t e ) ) )   { 
             f e t c h H i s t o r y ( c a c h e d P a g e ) ; 
             r e t u r n   f e t c h R e p l a c e m e n t ( u r l ) ; 
         }   e l s e   { 
             r e t u r n   f e t c h R e p l a c e m e n t ( u r l ,   r e s e t S c r o l l P o s i t i o n ) ; 
         } 
     } ; 
 
     t r a n s i t i o n C a c h e F o r   =   f u n c t i o n ( u r l )   { 
         v a r   c a c h e d P a g e ; 
         c a c h e d P a g e   =   p a g e C a c h e [ u r l ] ; 
         i f   ( c a c h e d P a g e   & &   ! c a c h e d P a g e . t r a n s i t i o n C a c h e D i s a b l e d )   { 
             r e t u r n   c a c h e d P a g e ; 
         } 
     } ; 
 
     e n a b l e T r a n s i t i o n C a c h e   =   f u n c t i o n ( e n a b l e )   { 
         i f   ( e n a b l e   = =   n u l l )   { 
             e n a b l e   =   t r u e ; 
         } 
         r e t u r n   t r a n s i t i o n C a c h e E n a b l e d   =   e n a b l e ; 
     } ; 
 
     f e t c h R e p l a c e m e n t   =   f u n c t i o n ( u r l ,   o n L o a d F u n c t i o n )   { 
         i f   ( o n L o a d F u n c t i o n   = =   n u l l )   { 
             o n L o a d F u n c t i o n   =   ( f u n c t i o n ( _ t h i s )   { 
                 r e t u r n   f u n c t i o n ( )   { } ; 
             } ) ( t h i s ) ; 
         } 
         t r i g g e r E v e n t ( E V E N T S . F E T C H ,   { 
             u r l :   u r l . a b s o l u t e 
         } ) ; 
         i f   ( x h r   ! =   n u l l )   { 
             x h r . a b o r t ( ) ; 
         } 
         x h r   =   n e w   X M L H t t p R e q u e s t ; 
         x h r . o p e n ( ' G E T ' ,   u r l . w i t h o u t H a s h F o r I E 1 0 c o m p a t i b i l i t y ( ) ,   t r u e ) ; 
         x h r . s e t R e q u e s t H e a d e r ( ' A c c e p t ' ,   ' t e x t / h t m l ,   a p p l i c a t i o n / x h t m l + x m l ,   a p p l i c a t i o n / x m l ' ) ; 
         x h r . s e t R e q u e s t H e a d e r ( ' X - X H R - R e f e r e r ' ,   r e f e r e r ) ; 
         x h r . o n l o a d   =   f u n c t i o n ( )   { 
             v a r   d o c ; 
             t r i g g e r E v e n t ( E V E N T S . R E C E I V E ,   { 
                 u r l :   u r l . a b s o l u t e 
             } ) ; 
             i f   ( d o c   =   p r o c e s s R e s p o n s e ( ) )   { 
                 r e f l e c t N e w U r l ( u r l ) ; 
                 c h a n g e P a g e . a p p l y ( n u l l ,   e x t r a c t T i t l e A n d B o d y ( d o c ) ) ; 
                 m a n u a l l y T r i g g e r H a s h C h a n g e F o r F i r e f o x ( ) ; 
                 r e f l e c t R e d i r e c t e d U r l ( ) ; 
                 o n L o a d F u n c t i o n ( ) ; 
                 r e t u r n   t r i g g e r E v e n t ( E V E N T S . L O A D ) ; 
             }   e l s e   { 
                 r e t u r n   d o c u m e n t . l o c a t i o n . h r e f   =   u r l . a b s o l u t e ; 
             } 
         } ; 
         x h r . o n l o a d e n d   =   f u n c t i o n ( )   { 
             r e t u r n   x h r   =   n u l l ; 
         } ; 
         x h r . o n e r r o r   =   f u n c t i o n ( )   { 
             r e t u r n   d o c u m e n t . l o c a t i o n . h r e f   =   u r l . a b s o l u t e ; 
         } ; 
         r e t u r n   x h r . s e n d ( ) ; 
     } ; 
 
     f e t c h H i s t o r y   =   f u n c t i o n ( c a c h e d P a g e )   { 
         i f   ( x h r   ! =   n u l l )   { 
             x h r . a b o r t ( ) ; 
         } 
         c h a n g e P a g e ( c a c h e d P a g e . t i t l e ,   c a c h e d P a g e . b o d y ) ; 
         r e c a l l S c r o l l P o s i t i o n ( c a c h e d P a g e ) ; 
         r e t u r n   t r i g g e r E v e n t ( E V E N T S . R E S T O R E ) ; 
     } ; 
 
     c a c h e C u r r e n t P a g e   =   f u n c t i o n ( )   { 
         v a r   c u r r e n t S t a t e U r l ; 
         c u r r e n t S t a t e U r l   =   n e w   C o m p o n e n t U r l ( c u r r e n t S t a t e . u r l ) ; 
         p a g e C a c h e [ c u r r e n t S t a t e U r l . a b s o l u t e ]   =   { 
             u r l :   c u r r e n t S t a t e U r l . r e l a t i v e , 
             b o d y :   d o c u m e n t . b o d y , 
             t i t l e :   d o c u m e n t . t i t l e , 
             p o s i t i o n Y :   w i n d o w . p a g e Y O f f s e t , 
             p o s i t i o n X :   w i n d o w . p a g e X O f f s e t , 
             c a c h e d A t :   n e w   D a t e ( ) . g e t T i m e ( ) , 
             t r a n s i t i o n C a c h e D i s a b l e d :   d o c u m e n t . q u e r y S e l e c t o r ( ' [ d a t a - n o - t r a n s i t i o n - c a c h e ] ' )   ! =   n u l l 
         } ; 
         r e t u r n   c o n s t r a i n P a g e C a c h e T o ( c a c h e S i z e ) ; 
     } ; 
 
     p a g e s C a c h e d   =   f u n c t i o n ( s i z e )   { 
         i f   ( s i z e   = =   n u l l )   { 
             s i z e   =   c a c h e S i z e ; 
         } 
         i f   ( / ^ [ \ d ] + $ / . t e s t ( s i z e ) )   { 
             r e t u r n   c a c h e S i z e   =   p a r s e I n t ( s i z e ) ; 
         } 
     } ; 
 
     c o n s t r a i n P a g e C a c h e T o   =   f u n c t i o n ( l i m i t )   { 
         v a r   c a c h e T i m e s R e c e n t F i r s t ,   i ,   k e y ,   l e n ,   p a g e C a c h e K e y s ,   r e s u l t s ; 
         p a g e C a c h e K e y s   =   O b j e c t . k e y s ( p a g e C a c h e ) ; 
         c a c h e T i m e s R e c e n t F i r s t   =   p a g e C a c h e K e y s . m a p ( f u n c t i o n ( u r l )   { 
             r e t u r n   p a g e C a c h e [ u r l ] . c a c h e d A t ; 
         } ) . s o r t ( f u n c t i o n ( a ,   b )   { 
             r e t u r n   b   -   a ; 
         } ) ; 
         r e s u l t s   =   [ ] ; 
         f o r   ( i   =   0 ,   l e n   =   p a g e C a c h e K e y s . l e n g t h ;   i   <   l e n ;   i + + )   { 
             k e y   =   p a g e C a c h e K e y s [ i ] ; 
             i f   ( ! ( p a g e C a c h e [ k e y ] . c a c h e d A t   < =   c a c h e T i m e s R e c e n t F i r s t [ l i m i t ] ) )   { 
                 c o n t i n u e ; 
             } 
             t r i g g e r E v e n t ( E V E N T S . E X P I R E ,   p a g e C a c h e [ k e y ] ) ; 
             r e s u l t s . p u s h ( d e l e t e   p a g e C a c h e [ k e y ] ) ; 
         } 
         r e t u r n   r e s u l t s ; 
     } ; 
 
     c h a n g e P a g e   =   f u n c t i o n ( t i t l e ,   b o d y ,   c s r f T o k e n ,   r u n S c r i p t s )   { 
         t r i g g e r E v e n t ( E V E N T S . B E F O R E _ U N L O A D ) ; 
         d o c u m e n t . t i t l e   =   t i t l e ; 
         d o c u m e n t . d o c u m e n t E l e m e n t . r e p l a c e C h i l d ( b o d y ,   d o c u m e n t . b o d y ) ; 
         i f   ( c s r f T o k e n   ! =   n u l l )   { 
             C S R F T o k e n . u p d a t e ( c s r f T o k e n ) ; 
         } 
         s e t A u t o f o c u s E l e m e n t ( ) ; 
         i f   ( r u n S c r i p t s )   { 
             e x e c u t e S c r i p t T a g s ( ) ; 
         } 
         c u r r e n t S t a t e   =   w i n d o w . h i s t o r y . s t a t e ; 
         t r i g g e r E v e n t ( E V E N T S . C H A N G E ) ; 
         r e t u r n   t r i g g e r E v e n t ( E V E N T S . U P D A T E ) ; 
     } ; 
 
     e x e c u t e S c r i p t T a g s   =   f u n c t i o n ( )   { 
         v a r   a t t r ,   c o p y ,   i ,   j ,   l e n ,   l e n 1 ,   n e x t S i b l i n g ,   p a r e n t N o d e ,   r e f ,   r e f 1 ,   s c r i p t ,   s c r i p t s ; 
         s c r i p t s   =   A r r a y . p r o t o t y p e . s l i c e . c a l l ( d o c u m e n t . b o d y . q u e r y S e l e c t o r A l l ( ' s c r i p t : n o t ( [ d a t a - t u r b o l i n k s - e v a l = " f a l s e " ] ) ' ) ) ; 
         f o r   ( i   =   0 ,   l e n   =   s c r i p t s . l e n g t h ;   i   <   l e n ;   i + + )   { 
             s c r i p t   =   s c r i p t s [ i ] ; 
             i f   ( ! ( ( r e f   =   s c r i p t . t y p e )   = = =   ' '   | |   r e f   = = =   ' t e x t / j a v a s c r i p t ' ) )   { 
                 c o n t i n u e ; 
             } 
             c o p y   =   d o c u m e n t . c r e a t e E l e m e n t ( ' s c r i p t ' ) ; 
             r e f 1   =   s c r i p t . a t t r i b u t e s ; 
             f o r   ( j   =   0 ,   l e n 1   =   r e f 1 . l e n g t h ;   j   <   l e n 1 ;   j + + )   { 
                 a t t r   =   r e f 1 [ j ] ; 
                 c o p y . s e t A t t r i b u t e ( a t t r . n a m e ,   a t t r . v a l u e ) ; 
             } 
             i f   ( ! s c r i p t . h a s A t t r i b u t e ( ' a s y n c ' ) )   { 
                 c o p y . a s y n c   =   f a l s e ; 
             } 
             c o p y . a p p e n d C h i l d ( d o c u m e n t . c r e a t e T e x t N o d e ( s c r i p t . i n n e r H T M L ) ) ; 
             p a r e n t N o d e   =   s c r i p t . p a r e n t N o d e ,   n e x t S i b l i n g   =   s c r i p t . n e x t S i b l i n g ; 
             p a r e n t N o d e . r e m o v e C h i l d ( s c r i p t ) ; 
             p a r e n t N o d e . i n s e r t B e f o r e ( c o p y ,   n e x t S i b l i n g ) ; 
         } 
     } ; 
 
     r e m o v e N o s c r i p t T a g s   =   f u n c t i o n ( n o d e )   { 
         n o d e . i n n e r H T M L   =   n o d e . i n n e r H T M L . r e p l a c e ( / < n o s c r i p t [ \ S \ s ] * ? < \ / n o s c r i p t > / i g ,   ' ' ) ; 
         r e t u r n   n o d e ; 
     } ; 
 
     s e t A u t o f o c u s E l e m e n t   =   f u n c t i o n ( )   { 
         v a r   a u t o f o c u s E l e m e n t ,   l i s t ; 
         a u t o f o c u s E l e m e n t   =   ( l i s t   =   d o c u m e n t . q u e r y S e l e c t o r A l l ( ' i n p u t [ a u t o f o c u s ] ,   t e x t a r e a [ a u t o f o c u s ] ' ) ) [ l i s t . l e n g t h   -   1 ] ; 
         i f   ( a u t o f o c u s E l e m e n t   & &   d o c u m e n t . a c t i v e E l e m e n t   ! = =   a u t o f o c u s E l e m e n t )   { 
             r e t u r n   a u t o f o c u s E l e m e n t . f o c u s ( ) ; 
         } 
     } ; 
 
     r e f l e c t N e w U r l   =   f u n c t i o n ( u r l )   { 
         i f   ( ( u r l   =   n e w   C o m p o n e n t U r l ( u r l ) ) . a b s o l u t e   ! = =   r e f e r e r )   { 
             r e t u r n   w i n d o w . h i s t o r y . p u s h S t a t e ( { 
                 t u r b o l i n k s :   t r u e , 
                 u r l :   u r l . a b s o l u t e 
             } ,   ' ' ,   u r l . a b s o l u t e ) ; 
         } 
     } ; 
 
     r e f l e c t R e d i r e c t e d U r l   =   f u n c t i o n ( )   { 
         v a r   l o c a t i o n ,   p r e s e r v e d H a s h ; 
         i f   ( l o c a t i o n   =   x h r . g e t R e s p o n s e H e a d e r ( ' X - X H R - R e d i r e c t e d - T o ' ) )   { 
             l o c a t i o n   =   n e w   C o m p o n e n t U r l ( l o c a t i o n ) ; 
             p r e s e r v e d H a s h   =   l o c a t i o n . h a s N o H a s h ( )   ?   d o c u m e n t . l o c a t i o n . h a s h   :   ' ' ; 
             r e t u r n   w i n d o w . h i s t o r y . r e p l a c e S t a t e ( c u r r e n t S t a t e ,   ' ' ,   l o c a t i o n . h r e f   +   p r e s e r v e d H a s h ) ; 
         } 
     } ; 
 
     r e m e m b e r R e f e r e r   =   f u n c t i o n ( )   { 
         r e t u r n   r e f e r e r   =   d o c u m e n t . l o c a t i o n . h r e f ; 
     } ; 
 
     r e m e m b e r C u r r e n t U r l   =   f u n c t i o n ( )   { 
         r e t u r n   w i n d o w . h i s t o r y . r e p l a c e S t a t e ( { 
             t u r b o l i n k s :   t r u e , 
             u r l :   d o c u m e n t . l o c a t i o n . h r e f 
         } ,   ' ' ,   d o c u m e n t . l o c a t i o n . h r e f ) ; 
     } ; 
 
     r e m e m b e r C u r r e n t S t a t e   =   f u n c t i o n ( )   { 
         r e t u r n   c u r r e n t S t a t e   =   w i n d o w . h i s t o r y . s t a t e ; 
     } ; 
 
     m a n u a l l y T r i g g e r H a s h C h a n g e F o r F i r e f o x   =   f u n c t i o n ( )   { 
         v a r   u r l ; 
         i f   ( n a v i g a t o r . u s e r A g e n t . m a t c h ( / F i r e f o x / )   & &   ! ( u r l   =   n e w   C o m p o n e n t U r l ) . h a s N o H a s h ( ) )   { 
             w i n d o w . h i s t o r y . r e p l a c e S t a t e ( c u r r e n t S t a t e ,   ' ' ,   u r l . w i t h o u t H a s h ( ) ) ; 
             r e t u r n   d o c u m e n t . l o c a t i o n . h a s h   =   u r l . h a s h ; 
         } 
     } ; 
 
     r e c a l l S c r o l l P o s i t i o n   =   f u n c t i o n ( p a g e )   { 
         r e t u r n   w i n d o w . s c r o l l T o ( p a g e . p o s i t i o n X ,   p a g e . p o s i t i o n Y ) ; 
     } ; 
 
     r e s e t S c r o l l P o s i t i o n   =   f u n c t i o n ( )   { 
         i f   ( d o c u m e n t . l o c a t i o n . h a s h )   { 
             r e t u r n   d o c u m e n t . l o c a t i o n . h r e f   =   d o c u m e n t . l o c a t i o n . h r e f ; 
         }   e l s e   { 
             r e t u r n   w i n d o w . s c r o l l T o ( 0 ,   0 ) ; 
         } 
     } ; 
 
     c l o n e   =   f u n c t i o n ( o r i g i n a l )   { 
         v a r   c o p y ,   k e y ,   v a l u e ; 
         i f   ( ( o r i g i n a l   = =   n u l l )   | |   t y p e o f   o r i g i n a l   ! = =   ' o b j e c t ' )   { 
             r e t u r n   o r i g i n a l ; 
         } 
         c o p y   =   n e w   o r i g i n a l . c o n s t r u c t o r ( ) ; 
         f o r   ( k e y   i n   o r i g i n a l )   { 
             v a l u e   =   o r i g i n a l [ k e y ] ; 
             c o p y [ k e y ]   =   c l o n e ( v a l u e ) ; 
         } 
         r e t u r n   c o p y ; 
     } ; 
 
     p o p C o o k i e   =   f u n c t i o n ( n a m e )   { 
         v a r   r e f ,   v a l u e ; 
         v a l u e   =   ( ( r e f   =   d o c u m e n t . c o o k i e . m a t c h ( n e w   R e g E x p ( n a m e   +   " = ( \ \ w + ) " ) ) )   ! =   n u l l   ?   r e f [ 1 ] . t o U p p e r C a s e ( )   :   v o i d   0 )   | |   ' ' ; 
         d o c u m e n t . c o o k i e   =   n a m e   +   ' = ;   e x p i r e s = T h u ,   0 1 - J a n - 7 0   0 0 : 0 0 : 0 1   G M T ;   p a t h = / ' ; 
         r e t u r n   v a l u e ; 
     } ; 
 
     t r i g g e r E v e n t   =   f u n c t i o n ( n a m e ,   d a t a )   { 
         v a r   e v e n t ; 
         i f   ( t y p e o f   P r o t o t y p e   ! = =   ' u n d e f i n e d ' )   { 
             E v e n t . f i r e ( d o c u m e n t ,   n a m e ,   d a t a ,   t r u e ) ; 
         } 
         e v e n t   =   d o c u m e n t . c r e a t e E v e n t ( ' E v e n t s ' ) ; 
         i f   ( d a t a )   { 
             e v e n t . d a t a   =   d a t a ; 
         } 
         e v e n t . i n i t E v e n t ( n a m e ,   t r u e ,   t r u e ) ; 
         r e t u r n   d o c u m e n t . d i s p a t c h E v e n t ( e v e n t ) ; 
     } ; 
 
     p a g e C h a n g e P r e v e n t e d   =   f u n c t i o n ( u r l )   { 
         r e t u r n   ! t r i g g e r E v e n t ( E V E N T S . B E F O R E _ C H A N G E ,   { 
             u r l :   u r l 
         } ) ; 
     } ; 
 
     p r o c e s s R e s p o n s e   =   f u n c t i o n ( )   { 
         v a r   a s s e t s C h a n g e d ,   c l i e n t O r S e r v e r E r r o r ,   d o c ,   e x t r a c t T r a c k A s s e t s ,   i n t e r s e c t i o n ,   v a l i d C o n t e n t ; 
         c l i e n t O r S e r v e r E r r o r   =   f u n c t i o n ( )   { 
             v a r   r e f ; 
             r e t u r n   ( 4 0 0   < =   ( r e f   =   x h r . s t a t u s )   & &   r e f   <   6 0 0 ) ; 
         } ; 
         v a l i d C o n t e n t   =   f u n c t i o n ( )   { 
             v a r   c o n t e n t T y p e ; 
             r e t u r n   ( ( c o n t e n t T y p e   =   x h r . g e t R e s p o n s e H e a d e r ( ' C o n t e n t - T y p e ' ) )   ! =   n u l l )   & &   c o n t e n t T y p e . m a t c h ( / ^ ( ? : t e x t \ / h t m l | a p p l i c a t i o n \ / x h t m l \ + x m l | a p p l i c a t i o n \ / x m l ) ( ? : ; | $ ) / ) ; 
         } ; 
         e x t r a c t T r a c k A s s e t s   =   f u n c t i o n ( d o c )   { 
             v a r   i ,   l e n ,   n o d e ,   r e f ,   r e s u l t s ; 
             r e f   =   d o c . q u e r y S e l e c t o r ( ' h e a d ' ) . c h i l d N o d e s ; 
             r e s u l t s   =   [ ] ; 
             f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                 n o d e   =   r e f [ i ] ; 
                 i f   ( ( t y p e o f   n o d e . g e t A t t r i b u t e   = = =   " f u n c t i o n "   ?   n o d e . g e t A t t r i b u t e ( ' d a t a - t u r b o l i n k s - t r a c k ' )   :   v o i d   0 )   ! =   n u l l )   { 
                     r e s u l t s . p u s h ( n o d e . g e t A t t r i b u t e ( ' s r c ' )   | |   n o d e . g e t A t t r i b u t e ( ' h r e f ' ) ) ; 
                 } 
             } 
             r e t u r n   r e s u l t s ; 
         } ; 
         a s s e t s C h a n g e d   =   f u n c t i o n ( d o c )   { 
             v a r   f e t c h e d A s s e t s ; 
             l o a d e d A s s e t s   | |   ( l o a d e d A s s e t s   =   e x t r a c t T r a c k A s s e t s ( d o c u m e n t ) ) ; 
             f e t c h e d A s s e t s   =   e x t r a c t T r a c k A s s e t s ( d o c ) ; 
             r e t u r n   f e t c h e d A s s e t s . l e n g t h   ! = =   l o a d e d A s s e t s . l e n g t h   | |   i n t e r s e c t i o n ( f e t c h e d A s s e t s ,   l o a d e d A s s e t s ) . l e n g t h   ! = =   l o a d e d A s s e t s . l e n g t h ; 
         } ; 
         i n t e r s e c t i o n   =   f u n c t i o n ( a ,   b )   { 
             v a r   i ,   l e n ,   r e f ,   r e s u l t s ,   v a l u e ; 
             i f   ( a . l e n g t h   >   b . l e n g t h )   { 
                 r e f   =   [ b ,   a ] ,   a   =   r e f [ 0 ] ,   b   =   r e f [ 1 ] ; 
             } 
             r e s u l t s   =   [ ] ; 
             f o r   ( i   =   0 ,   l e n   =   a . l e n g t h ;   i   <   l e n ;   i + + )   { 
                 v a l u e   =   a [ i ] ; 
                 i f   ( i n d e x O f . c a l l ( b ,   v a l u e )   > =   0 )   { 
                     r e s u l t s . p u s h ( v a l u e ) ; 
                 } 
             } 
             r e t u r n   r e s u l t s ; 
         } ; 
         i f   ( ! c l i e n t O r S e r v e r E r r o r ( )   & &   v a l i d C o n t e n t ( ) )   { 
             d o c   =   c r e a t e D o c u m e n t ( x h r . r e s p o n s e T e x t ) ; 
             i f   ( d o c   & &   ! a s s e t s C h a n g e d ( d o c ) )   { 
                 r e t u r n   d o c ; 
             } 
         } 
     } ; 
 
     e x t r a c t T i t l e A n d B o d y   =   f u n c t i o n ( d o c )   { 
         v a r   t i t l e ; 
         t i t l e   =   d o c . q u e r y S e l e c t o r ( ' t i t l e ' ) ; 
         r e t u r n   [ t i t l e   ! =   n u l l   ?   t i t l e . t e x t C o n t e n t   :   v o i d   0 ,   r e m o v e N o s c r i p t T a g s ( d o c . q u e r y S e l e c t o r ( ' b o d y ' ) ) ,   C S R F T o k e n . g e t ( d o c ) . t o k e n ,   ' r u n S c r i p t s ' ] ; 
     } ; 
 
     C S R F T o k e n   =   { 
         g e t :   f u n c t i o n ( d o c )   { 
             v a r   t a g ; 
             i f   ( d o c   = =   n u l l )   { 
                 d o c   =   d o c u m e n t ; 
             } 
             r e t u r n   { 
                 n o d e :   t a g   =   d o c . q u e r y S e l e c t o r ( ' m e t a [ n a m e = " c s r f - t o k e n " ] ' ) , 
                 t o k e n :   t a g   ! =   n u l l   ?   t y p e o f   t a g . g e t A t t r i b u t e   = = =   " f u n c t i o n "   ?   t a g . g e t A t t r i b u t e ( ' c o n t e n t ' )   :   v o i d   0   :   v o i d   0 
             } ; 
         } , 
         u p d a t e :   f u n c t i o n ( l a t e s t )   { 
             v a r   c u r r e n t ; 
             c u r r e n t   =   t h i s . g e t ( ) ; 
             i f   ( ( c u r r e n t . t o k e n   ! =   n u l l )   & &   ( l a t e s t   ! =   n u l l )   & &   c u r r e n t . t o k e n   ! = =   l a t e s t )   { 
                 r e t u r n   c u r r e n t . n o d e . s e t A t t r i b u t e ( ' c o n t e n t ' ,   l a t e s t ) ; 
             } 
         } 
     } ; 
 
     b r o w s e r C o m p a t i b l e D o c u m e n t P a r s e r   =   f u n c t i o n ( )   { 
         v a r   b u i l d T e s t s U s i n g ,   c r e a t e D o c u m e n t U s i n g D O M ,   c r e a t e D o c u m e n t U s i n g F r a g m e n t ,   c r e a t e D o c u m e n t U s i n g P a r s e r ,   c r e a t e D o c u m e n t U s i n g W r i t e ,   d o c T e s t ,   d o c T e s t s ,   e ,   i ,   l e n ; 
         c r e a t e D o c u m e n t U s i n g P a r s e r   =   f u n c t i o n ( h t m l )   { 
             r e t u r n   ( n e w   D O M P a r s e r ) . p a r s e F r o m S t r i n g ( h t m l ,   ' t e x t / h t m l ' ) ; 
         } ; 
         c r e a t e D o c u m e n t U s i n g D O M   =   f u n c t i o n ( h t m l )   { 
             v a r   d o c ; 
             d o c   =   d o c u m e n t . i m p l e m e n t a t i o n . c r e a t e H T M L D o c u m e n t ( ' ' ) ; 
             d o c . d o c u m e n t E l e m e n t . i n n e r H T M L   =   h t m l ; 
             r e t u r n   d o c ; 
         } ; 
         c r e a t e D o c u m e n t U s i n g W r i t e   =   f u n c t i o n ( h t m l )   { 
             v a r   d o c ; 
             d o c   =   d o c u m e n t . i m p l e m e n t a t i o n . c r e a t e H T M L D o c u m e n t ( ' ' ) ; 
             d o c . o p e n ( ' r e p l a c e ' ) ; 
             d o c . w r i t e ( h t m l ) ; 
             d o c . c l o s e ( ) ; 
             r e t u r n   d o c ; 
         } ; 
         c r e a t e D o c u m e n t U s i n g F r a g m e n t   =   f u n c t i o n ( h t m l )   { 
             v a r   b o d y ,   d o c ,   h e a d ,   h t m l W r a p p e r ,   r e f ,   r e f 1 ; 
             h e a d   =   ( ( r e f   =   h t m l . m a t c h ( / < h e a d [ ^ > ] * > ( [ \ s \ S . ] * ) < \ / h e a d > / i ) )   ! =   n u l l   ?   r e f [ 0 ]   :   v o i d   0 )   | |   ' < h e a d > < / h e a d > ' ; 
             b o d y   =   ( ( r e f 1   =   h t m l . m a t c h ( / < b o d y [ ^ > ] * > ( [ \ s \ S . ] * ) < \ / b o d y > / i ) )   ! =   n u l l   ?   r e f 1 [ 0 ]   :   v o i d   0 )   | |   ' < b o d y > < / b o d y > ' ; 
             h t m l W r a p p e r   =   d o c u m e n t . c r e a t e E l e m e n t ( ' h t m l ' ) ; 
             h t m l W r a p p e r . i n n e r H T M L   =   h e a d   +   b o d y ; 
             d o c   =   d o c u m e n t . c r e a t e D o c u m e n t F r a g m e n t ( ) ; 
             d o c . a p p e n d C h i l d ( h t m l W r a p p e r ) ; 
             r e t u r n   d o c ; 
         } ; 
         b u i l d T e s t s U s i n g   =   f u n c t i o n ( c r e a t e M e t h o d )   { 
             v a r   b u i l d T e s t ,   f o r m N e s t i n g T e s t ,   s t r u c t u r e T e s t ; 
             b u i l d T e s t   =   f u n c t i o n ( f a l l b a c k ,   p a s s e s )   { 
                 r e t u r n   { 
                     p a s s e s :   p a s s e s ( ) , 
                     f a l l b a c k :   f a l l b a c k 
                 } ; 
             } ; 
             s t r u c t u r e T e s t   =   b u i l d T e s t ( c r e a t e D o c u m e n t U s i n g W r i t e ,   ( f u n c t i o n ( _ t h i s )   { 
                 r e t u r n   f u n c t i o n ( )   { 
                     v a r   r e f ,   r e f 1 ; 
                     r e t u r n   ( ( r e f   =   c r e a t e M e t h o d ( ' < h t m l > < b o d y > < p > t e s t ' ) )   ! =   n u l l   ?   ( r e f 1   =   r e f . b o d y )   ! =   n u l l   ?   r e f 1 . c h i l d N o d e s . l e n g t h   :   v o i d   0   :   v o i d   0 )   = = =   1 ; 
                 } ; 
             } ) ( t h i s ) ) ; 
             f o r m N e s t i n g T e s t   =   b u i l d T e s t ( c r e a t e D o c u m e n t U s i n g F r a g m e n t ,   ( f u n c t i o n ( _ t h i s )   { 
                 r e t u r n   f u n c t i o n ( )   { 
                     v a r   r e f ,   r e f 1 ; 
                     r e t u r n   ( ( r e f   =   c r e a t e M e t h o d ( ' < h t m l > < b o d y > < f o r m > < / f o r m > < d i v > < / d i v > < / b o d y > < / h t m l > ' ) )   ! =   n u l l   ?   ( r e f 1   =   r e f . b o d y )   ! =   n u l l   ?   r e f 1 . c h i l d N o d e s . l e n g t h   :   v o i d   0   :   v o i d   0 )   = = =   2 ; 
                 } ; 
             } ) ( t h i s ) ) ; 
             r e t u r n   [ s t r u c t u r e T e s t ,   f o r m N e s t i n g T e s t ] ; 
         } ; 
         t r y   { 
             i f   ( w i n d o w . D O M P a r s e r )   { 
                 d o c T e s t s   =   b u i l d T e s t s U s i n g ( c r e a t e D o c u m e n t U s i n g P a r s e r ) ; 
                 r e t u r n   c r e a t e D o c u m e n t U s i n g P a r s e r ; 
             } 
         }   c a t c h   ( _ e r r o r )   { 
             e   =   _ e r r o r ; 
             d o c T e s t s   =   b u i l d T e s t s U s i n g ( c r e a t e D o c u m e n t U s i n g D O M ) ; 
             r e t u r n   c r e a t e D o c u m e n t U s i n g D O M ; 
         }   f i n a l l y   { 
             f o r   ( i   =   0 ,   l e n   =   d o c T e s t s . l e n g t h ;   i   <   l e n ;   i + + )   { 
                 d o c T e s t   =   d o c T e s t s [ i ] ; 
                 i f   ( ! d o c T e s t . p a s s e s )   { 
                     r e t u r n   d o c T e s t . f a l l b a c k ; 
                 } 
             } 
         } 
     } ; 
 
     C o m p o n e n t U r l   =   ( f u n c t i o n ( )   { 
         f u n c t i o n   C o m p o n e n t U r l ( o r i g i n a l 1 )   { 
             t h i s . o r i g i n a l   =   o r i g i n a l 1   ! =   n u l l   ?   o r i g i n a l 1   :   d o c u m e n t . l o c a t i o n . h r e f ; 
             i f   ( t h i s . o r i g i n a l . c o n s t r u c t o r   = = =   C o m p o n e n t U r l )   { 
                 r e t u r n   t h i s . o r i g i n a l ; 
             } 
             t h i s . _ p a r s e ( ) ; 
         } 
 
         C o m p o n e n t U r l . p r o t o t y p e . w i t h o u t H a s h   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . h r e f . r e p l a c e ( t h i s . h a s h ,   ' ' ) . r e p l a c e ( ' # ' ,   ' ' ) ; 
         } ; 
 
         C o m p o n e n t U r l . p r o t o t y p e . w i t h o u t H a s h F o r I E 1 0 c o m p a t i b i l i t y   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . w i t h o u t H a s h ( ) ; 
         } ; 
 
         C o m p o n e n t U r l . p r o t o t y p e . h a s N o H a s h   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . h a s h . l e n g t h   = = =   0 ; 
         } ; 
 
         C o m p o n e n t U r l . p r o t o t y p e . _ p a r s e   =   f u n c t i o n ( )   { 
             v a r   r e f ; 
             ( t h i s . l i n k   ! =   n u l l   ?   t h i s . l i n k   :   t h i s . l i n k   =   d o c u m e n t . c r e a t e E l e m e n t ( ' a ' ) ) . h r e f   =   t h i s . o r i g i n a l ; 
             r e f   =   t h i s . l i n k ,   t h i s . h r e f   =   r e f . h r e f ,   t h i s . p r o t o c o l   =   r e f . p r o t o c o l ,   t h i s . h o s t   =   r e f . h o s t ,   t h i s . h o s t n a m e   =   r e f . h o s t n a m e ,   t h i s . p o r t   =   r e f . p o r t ,   t h i s . p a t h n a m e   =   r e f . p a t h n a m e ,   t h i s . s e a r c h   =   r e f . s e a r c h ,   t h i s . h a s h   =   r e f . h a s h ; 
             t h i s . o r i g i n   =   [ t h i s . p r o t o c o l ,   ' / / ' ,   t h i s . h o s t n a m e ] . j o i n ( ' ' ) ; 
             i f   ( t h i s . p o r t . l e n g t h   ! = =   0 )   { 
                 t h i s . o r i g i n   + =   " : "   +   t h i s . p o r t ; 
             } 
             t h i s . r e l a t i v e   =   [ t h i s . p a t h n a m e ,   t h i s . s e a r c h ,   t h i s . h a s h ] . j o i n ( ' ' ) ; 
             r e t u r n   t h i s . a b s o l u t e   =   t h i s . h r e f ; 
         } ; 
 
         r e t u r n   C o m p o n e n t U r l ; 
 
     } ) ( ) ; 
 
     L i n k   =   ( f u n c t i o n ( s u p e r C l a s s )   { 
         e x t e n d ( L i n k ,   s u p e r C l a s s ) ; 
 
         L i n k . H T M L _ E X T E N S I O N S   =   [ ' h t m l ' ] ; 
 
         L i n k . a l l o w E x t e n s i o n s   =   f u n c t i o n ( )   { 
             v a r   e x t e n s i o n ,   e x t e n s i o n s ,   i ,   l e n ; 
             e x t e n s i o n s   =   1   < =   a r g u m e n t s . l e n g t h   ?   s l i c e . c a l l ( a r g u m e n t s ,   0 )   :   [ ] ; 
             f o r   ( i   =   0 ,   l e n   =   e x t e n s i o n s . l e n g t h ;   i   <   l e n ;   i + + )   { 
                 e x t e n s i o n   =   e x t e n s i o n s [ i ] ; 
                 L i n k . H T M L _ E X T E N S I O N S . p u s h ( e x t e n s i o n ) ; 
             } 
             r e t u r n   L i n k . H T M L _ E X T E N S I O N S ; 
         } ; 
 
         f u n c t i o n   L i n k ( l i n k 1 )   { 
             t h i s . l i n k   =   l i n k 1 ; 
             i f   ( t h i s . l i n k . c o n s t r u c t o r   = = =   L i n k )   { 
                 r e t u r n   t h i s . l i n k ; 
             } 
             t h i s . o r i g i n a l   =   t h i s . l i n k . h r e f ; 
             t h i s . o r i g i n a l E l e m e n t   =   t h i s . l i n k ; 
             t h i s . l i n k   =   t h i s . l i n k . c l o n e N o d e ( f a l s e ) ; 
             L i n k . _ _ s u p e r _ _ . c o n s t r u c t o r . a p p l y ( t h i s ,   a r g u m e n t s ) ; 
         } 
 
         L i n k . p r o t o t y p e . s h o u l d I g n o r e   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . _ c r o s s O r i g i n ( )   | |   t h i s . _ a n c h o r e d ( )   | |   t h i s . _ n o n H t m l ( )   | |   t h i s . _ o p t O u t ( )   | |   t h i s . _ t a r g e t ( ) ; 
         } ; 
 
         L i n k . p r o t o t y p e . _ c r o s s O r i g i n   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . o r i g i n   ! = =   ( n e w   C o m p o n e n t U r l ) . o r i g i n ; 
         } ; 
 
         L i n k . p r o t o t y p e . _ a n c h o r e d   =   f u n c t i o n ( )   { 
             r e t u r n   ( t h i s . h a s h . l e n g t h   >   0   | |   t h i s . h r e f . c h a r A t ( t h i s . h r e f . l e n g t h   -   1 )   = = =   ' # ' )   & &   ( t h i s . w i t h o u t H a s h ( )   = = =   ( n e w   C o m p o n e n t U r l ) . w i t h o u t H a s h ( ) ) ; 
         } ; 
 
         L i n k . p r o t o t y p e . _ n o n H t m l   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . p a t h n a m e . m a t c h ( / \ . [ a - z ] + $ / g )   & &   ! t h i s . p a t h n a m e . m a t c h ( n e w   R e g E x p ( " \ \ . ( ? : "   +   ( L i n k . H T M L _ E X T E N S I O N S . j o i n ( ' | ' ) )   +   " ) ? $ " ,   ' g ' ) ) ; 
         } ; 
 
         L i n k . p r o t o t y p e . _ o p t O u t   =   f u n c t i o n ( )   { 
             v a r   i g n o r e ,   l i n k ; 
             l i n k   =   t h i s . o r i g i n a l E l e m e n t ; 
             w h i l e   ( ! ( i g n o r e   | |   l i n k   = = =   d o c u m e n t ) )   { 
                 i g n o r e   =   l i n k . g e t A t t r i b u t e ( ' d a t a - n o - t u r b o l i n k ' )   ! =   n u l l ; 
                 l i n k   =   l i n k . p a r e n t N o d e ; 
             } 
             r e t u r n   i g n o r e ; 
         } ; 
 
         L i n k . p r o t o t y p e . _ t a r g e t   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . l i n k . t a r g e t . l e n g t h   ! = =   0 ; 
         } ; 
 
         r e t u r n   L i n k ; 
 
     } ) ( C o m p o n e n t U r l ) ; 
 
     C l i c k   =   ( f u n c t i o n ( )   { 
         C l i c k . i n s t a l l H a n d l e r L a s t   =   f u n c t i o n ( e v e n t )   { 
             i f   ( ! e v e n t . d e f a u l t P r e v e n t e d )   { 
                 d o c u m e n t . r e m o v e E v e n t L i s t e n e r ( ' c l i c k ' ,   C l i c k . h a n d l e ,   f a l s e ) ; 
                 r e t u r n   d o c u m e n t . a d d E v e n t L i s t e n e r ( ' c l i c k ' ,   C l i c k . h a n d l e ,   f a l s e ) ; 
             } 
         } ; 
 
         C l i c k . h a n d l e   =   f u n c t i o n ( e v e n t )   { 
             r e t u r n   n e w   C l i c k ( e v e n t ) ; 
         } ; 
 
         f u n c t i o n   C l i c k ( e v e n t 1 )   { 
             t h i s . e v e n t   =   e v e n t 1 ; 
             i f   ( t h i s . e v e n t . d e f a u l t P r e v e n t e d )   { 
                 r e t u r n ; 
             } 
             t h i s . _ e x t r a c t L i n k ( ) ; 
             i f   ( t h i s . _ v a l i d F o r T u r b o l i n k s ( ) )   { 
                 i f   ( ! p a g e C h a n g e P r e v e n t e d ( t h i s . l i n k . a b s o l u t e ) )   { 
                     v i s i t ( t h i s . l i n k . h r e f ) ; 
                 } 
                 t h i s . e v e n t . p r e v e n t D e f a u l t ( ) ; 
             } 
         } 
 
         C l i c k . p r o t o t y p e . _ e x t r a c t L i n k   =   f u n c t i o n ( )   { 
             v a r   l i n k ; 
             l i n k   =   t h i s . e v e n t . t a r g e t ; 
             w h i l e   ( ! ( ! l i n k . p a r e n t N o d e   | |   l i n k . n o d e N a m e   = = =   ' A ' ) )   { 
                 l i n k   =   l i n k . p a r e n t N o d e ; 
             } 
             i f   ( l i n k . n o d e N a m e   = = =   ' A '   & &   l i n k . h r e f . l e n g t h   ! = =   0 )   { 
                 r e t u r n   t h i s . l i n k   =   n e w   L i n k ( l i n k ) ; 
             } 
         } ; 
 
         C l i c k . p r o t o t y p e . _ v a l i d F o r T u r b o l i n k s   =   f u n c t i o n ( )   { 
             r e t u r n   ( t h i s . l i n k   ! =   n u l l )   & &   ! ( t h i s . l i n k . s h o u l d I g n o r e ( )   | |   t h i s . _ n o n S t a n d a r d C l i c k ( ) ) ; 
         } ; 
 
         C l i c k . p r o t o t y p e . _ n o n S t a n d a r d C l i c k   =   f u n c t i o n ( )   { 
             r e t u r n   t h i s . e v e n t . w h i c h   >   1   | |   t h i s . e v e n t . m e t a K e y   | |   t h i s . e v e n t . c t r l K e y   | |   t h i s . e v e n t . s h i f t K e y   | |   t h i s . e v e n t . a l t K e y ; 
         } ; 
 
         r e t u r n   C l i c k ; 
 
     } ) ( ) ; 
 
     b y p a s s O n L o a d P o p s t a t e   =   f u n c t i o n ( f n )   { 
         r e t u r n   s e t T i m e o u t ( f n ,   5 0 0 ) ; 
     } ; 
 
     i n s t a l l D o c u m e n t R e a d y P a g e E v e n t T r i g g e r s   =   f u n c t i o n ( )   { 
         r e t u r n   d o c u m e n t . a d d E v e n t L i s t e n e r ( ' D O M C o n t e n t L o a d e d ' ,   ( f u n c t i o n ( )   { 
             t r i g g e r E v e n t ( E V E N T S . C H A N G E ) ; 
             r e t u r n   t r i g g e r E v e n t ( E V E N T S . U P D A T E ) ; 
         } ) ,   t r u e ) ; 
     } ; 
 
     i n s t a l l J q u e r y A j a x S u c c e s s P a g e U p d a t e T r i g g e r   =   f u n c t i o n ( )   { 
         i f   ( t y p e o f   j Q u e r y   ! = =   ' u n d e f i n e d ' )   { 
             r e t u r n   j Q u e r y ( d o c u m e n t ) . o n ( ' a j a x S u c c e s s ' ,   f u n c t i o n ( e v e n t ,   x h r ,   s e t t i n g s )   { 
                 i f   ( ! j Q u e r y . t r i m ( x h r . r e s p o n s e T e x t ) )   { 
                     r e t u r n ; 
                 } 
                 r e t u r n   t r i g g e r E v e n t ( E V E N T S . U P D A T E ) ; 
             } ) ; 
         } 
     } ; 
 
     i n s t a l l H i s t o r y C h a n g e H a n d l e r   =   f u n c t i o n ( e v e n t )   { 
         v a r   c a c h e d P a g e ,   r e f ; 
         i f   ( ( r e f   =   e v e n t . s t a t e )   ! =   n u l l   ?   r e f . t u r b o l i n k s   :   v o i d   0 )   { 
             i f   ( c a c h e d P a g e   =   p a g e C a c h e [ ( n e w   C o m p o n e n t U r l ( e v e n t . s t a t e . u r l ) ) . a b s o l u t e ] )   { 
                 c a c h e C u r r e n t P a g e ( ) ; 
                 r e t u r n   f e t c h H i s t o r y ( c a c h e d P a g e ) ; 
             }   e l s e   { 
                 r e t u r n   v i s i t ( e v e n t . t a r g e t . l o c a t i o n . h r e f ) ; 
             } 
         } 
     } ; 
 
     i n i t i a l i z e T u r b o l i n k s   =   f u n c t i o n ( )   { 
         r e m e m b e r C u r r e n t U r l ( ) ; 
         r e m e m b e r C u r r e n t S t a t e ( ) ; 
         c r e a t e D o c u m e n t   =   b r o w s e r C o m p a t i b l e D o c u m e n t P a r s e r ( ) ; 
         d o c u m e n t . a d d E v e n t L i s t e n e r ( ' c l i c k ' ,   C l i c k . i n s t a l l H a n d l e r L a s t ,   t r u e ) ; 
         w i n d o w . a d d E v e n t L i s t e n e r ( ' h a s h c h a n g e ' ,   f u n c t i o n ( e v e n t )   { 
             r e m e m b e r C u r r e n t U r l ( ) ; 
             r e t u r n   r e m e m b e r C u r r e n t S t a t e ( ) ; 
         } ,   f a l s e ) ; 
         r e t u r n   b y p a s s O n L o a d P o p s t a t e ( f u n c t i o n ( )   { 
             r e t u r n   w i n d o w . a d d E v e n t L i s t e n e r ( ' p o p s t a t e ' ,   i n s t a l l H i s t o r y C h a n g e H a n d l e r ,   f a l s e ) ; 
         } ) ; 
     } ; 
 
     h i s t o r y S t a t e I s D e f i n e d   =   w i n d o w . h i s t o r y . s t a t e   ! = =   v o i d   0   | |   n a v i g a t o r . u s e r A g e n t . m a t c h ( / F i r e f o x \ / 2 [ 6 | 7 ] / ) ; 
 
     b r o w s e r S u p p o r t s P u s h S t a t e   =   w i n d o w . h i s t o r y   & &   w i n d o w . h i s t o r y . p u s h S t a t e   & &   w i n d o w . h i s t o r y . r e p l a c e S t a t e   & &   h i s t o r y S t a t e I s D e f i n e d ; 
 
     b r o w s e r I s n t B u g g y   =   ! n a v i g a t o r . u s e r A g e n t . m a t c h ( / C r i O S \ / / ) ; 
 
     r e q u e s t M e t h o d I s S a f e   =   ( r e f   =   p o p C o o k i e ( ' r e q u e s t _ m e t h o d ' ) )   = = =   ' G E T '   | |   r e f   = = =   ' ' ; 
 
     b r o w s e r S u p p o r t s T u r b o l i n k s   =   b r o w s e r S u p p o r t s P u s h S t a t e   & &   b r o w s e r I s n t B u g g y   & &   r e q u e s t M e t h o d I s S a f e ; 
 
     b r o w s e r S u p p o r t s C u s t o m E v e n t s   =   d o c u m e n t . a d d E v e n t L i s t e n e r   & &   d o c u m e n t . c r e a t e E v e n t ; 
 
     i f   ( b r o w s e r S u p p o r t s C u s t o m E v e n t s )   { 
         i n s t a l l D o c u m e n t R e a d y P a g e E v e n t T r i g g e r s ( ) ; 
         i n s t a l l J q u e r y A j a x S u c c e s s P a g e U p d a t e T r i g g e r ( ) ; 
     } 
 
     i f   ( b r o w s e r S u p p o r t s T u r b o l i n k s )   { 
         v i s i t   =   f e t c h ; 
         i n i t i a l i z e T u r b o l i n k s ( ) ; 
     }   e l s e   { 
         v i s i t   =   f u n c t i o n ( u r l )   { 
             r e t u r n   d o c u m e n t . l o c a t i o n . h r e f   =   u r l ; 
         } ; 
     } 
 
     t h i s . T u r b o l i n k s   =   { 
         v i s i t :   v i s i t , 
         p a g e s C a c h e d :   p a g e s C a c h e d , 
         e n a b l e T r a n s i t i o n C a c h e :   e n a b l e T r a n s i t i o n C a c h e , 
         a l l o w L i n k E x t e n s i o n s :   L i n k . a l l o w E x t e n s i o n s , 
         s u p p o r t e d :   b r o w s e r S u p p o r t s T u r b o l i n k s , 
         E V E N T S :   c l o n e ( E V E N T S ) 
     } ; 
 
 } ) . c a l l ( t h i s ) ; 
   l       https://u99d4dcb193vli6qas1cakf05f9ai6u8s7f6e13vsfrjsaca9an0.cc-propeller.cloud/assets/turbolinks.js?body=1     >W      >W                            
l Q   	   call!!                +H!!       C   J     -   ^      /                  (         	   0W     0W                   W  QZ    5    D   Q       Q    
  Q[   5      QZ    5      Q[      Q
 +  QB   Q@   Q@ "  Q@   Q@   Q@ #  Q[   =   ]   =   ]   =   ]   =	   ]
   =   ]   =   ]   =   ]   =   ]   =   ]    $  Q   W  Q      Q   W
  Q      Q	      Q
    	  Q   W  Q      Q      Q    *  Q    ,  Q    %  Q      Q    (  Q      Q      Q      Q    )  Q      Q      Q    !  Q   W  Q    &  Q      Q      Q      Q[!      ]       ]      Q"      Q#   :      Q$       :    Q%   :     Q&      Q'   W  Q(   W  Q)    '  Q*   W  Q   5   5   >(ID    Q   5      
+   : W  Q   5   E7   Q   5   5   E!   Q   5   5   E   QV  W   Q   5      
,   :  W  QV  =   : W  =    HD   QV  =!   HW  QV   E   QV  E   QV  W  Q"   5#   E   Q"   5$   W	  QV	     V    QV    QV     V     QV    Q   -      QV  [.      ]&   V  ]'   V
  ](      5)   ]*   V  ]+    !   $  : ],   6%   Q!'+%	
$19@ir                          ) / a g r {     
 "	 S ^ i u 1
     indexOf   hasOwnProperty   slice%   page:before-change   BEFORE_CHANGE   page:fetch   FETCH   page:receive   RECEIVE   page:change   CHANGE   page:update   UPDATE   page:load	   LOAD   page:restore   RESTORE%   page:before-unload   BEFORE_UNLOAD   page:expire   EXPIRE   get   update   window   history   state   navigator   userAgent   match   pushState   replaceState   request_method   GET      document!   addEventListener   createEvent   Turbolinks   visit   pagesCached+   enableTransitionCache   allowExtensions'   allowLinkExtensions   supported   EVENTS!!:      CSRFToken1   browserSupportsPushState   indexOf'   pageChangePrevented%   rememberCurrentUrl   processResponse   ref   .this)   initializeTurbolinks   reflectNewUrlK   installDocumentReadyPageEventTriggers!   fetchReplacement!   cacheCurrentPage   extend   currentState   rememberReferer   pagesCached+   historyStateIsDefined?   browserCompatibleDocumentParser   visit   changePageS   installJqueryAjaxSuccessPageUpdateTrigger)   rememberCurrentState   popCookie   createDocument   hasProp)   bypassOnLoadPopstate7   browserSupportsCustomEvents'   resetScrollPosition   slice   referer)   recallScrollPosition   pageCache'   extractTitleAndBody-   transitionCacheEnabled   fetchHistory)   constrainPageCacheTo   Click%   transitionCacheFor+   enableTransitionCache	   Link   ComponentUrl   clone   loadedAssets   xhr'   requestMethodIsSafe   EVENTS'   setAutofocusElement!   browserIsntBuggy3   browserSupportsTurbolinks   triggerEvent7   installHistoryChangeHandler)   reflectRedirectedUrlG   manuallyTriggerHashChangeForFirefox   fetch#   executeScriptTags   cacheSize%   removeNoscriptTags        +H!!          indexOf<b    s    s     $   "       5!!          extendC           &                                                              W  QT K;   mW         
T V   l       V   T V   78QQLMQNV  T 5   6   Q   V  A,  R  6   Q   T 5   6   Q   0@,  #$ 	   call   prototype   __super__!!      child   parent   key	   ctor      +H!!       	   ctor            	                                                          W   QV      6    Q      constructor!!      .this         +H;       5;      B   5!!            !!            !!    	   !!   BEFORE_CHANGE!!!!   FETCH!!!!   RECEIVE!!!!   CHANGE!!!!   UPDATE!!!!	   LOAD!!!!   RESTORE!!!!   BEFORE_UNLOAD!!!!   EXPIRE!!    !!          fetchB   	    	  $      0       5!!       %   transitionCacheForB )	  	  !	  	  1              5!!       +   enableTransitionCacheB 	  Y
  	  Y
  9   "           5!!       !   fetchReplacementB y
    q
    @      R          url    onLoadFunction   B 
    
    B                B  
  
  
  
  C             55   B    E    E  P      0       5   B  c    [    `             5   B          c             55!!          fetchHistoryB         i              5!!       !   cacheCurrentPageB          r             5!!          pagesCachedB               0       5!!       )   constrainPageCacheToB            !   0         B _    W       6          5   B                      55!!          changePageB )    !          0       5!!       #   executeScriptTagsB                P       5!!       %   removeNoscriptTagsB   2    2               5!!       '   setAutofocusElementB  U  j  M  j                 5!!          reflectNewUrlB   N    N                5!!       )   reflectRedirectedUrlB  r    j       !           5!!          rememberRefererB    
    
               5!!       %   rememberCurrentUrlC  I       	                            
         ,    $                         5      
[    C]      5   5   ]   =      5   5   :       window   history   replaceState   turbolinks   document   location	   href   url   !!              +H!!       !!   turbolinks!!!!   url!!    ;       5!!       )   rememberCurrentStateC                                                            !                  5   5          window   history   state!!              +H;       5!!       G   manuallyTriggerHashChangeForFirefoxB  J   6!  B   6!     0           5!!       )   recallScrollPositionB Z!  !  R!  !     !          5!!       '   resetScrollPositionB  !  d"  !  d"         0       5!!          cloneC ~          B                                 y"  #  q"  #          
       T  @D   QT  '=    I
   T  T  5   A,  R  W   QT  K/   mW  T  V  7W  QV   V   !  V  : 8QQLMQNV     54     object   constructor!!      original	   copy   key   value       +H;   A   6   0       5!!          popCookieC {          %                          
        #  $  #  $                     5      
   AT  =   ,  R : W   @   V   ?7   
:     >(D   Q=   W  Q    T  =   6   QV  &?    document   cookie   match   RegExp   =(\w+)   toUpperCase   ]   =; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/!!   	   name   ref   value       +H;       5!!          triggerEventC        
   )                                  $  %  $  %                     '=   I"         
   T  T C Q      
=   : W   QT    V   T 6   QV      
T  CC Q   	   
V   :     Prototype   undefined   Event	   fire   document   createEvent   Events	   data   initEvent   dispatchEvent!!   	   name	   data   event       +H;0       5!!       '   pageChangePreventedB &  g&  &  g&  )             5!!          processResponseB  &  ~-  ~&  ~-  /     P       %   extractTrackAssets    intersection   B  '  ^'  '  ^'  1  "          5   B  {'  B(  s'  B(  5            5   B e(  *  ](  *  9  !   0       5   B 5*  V+  -*  V+  E            5   B s+  ,  k+  ,  K     @       55!!       '   extractTitleAndBodyB -  s.  -  s.  a             5!!          getB .  /  .  /  h             5!!          updateB /  0  /  0  r     "       5!!       !!   get!!!!   update!!    !!       ?   browserCompatibleDocumentParserC  #                                          0  @;  0  @;  {      	              W  Q   W  Q      Q      Q   W   Q    5   #   V   V  : W  QV  tU   tM        Qv  QV  W  QV   V  : W  QV  t   t   t   >W  QV     W  Q A   mV  V  7W  QV  5       V  5    V  #?W  QQV  V  u 	
    5     A2L 
 2  )     window   DOMParser   length   passes   fallback!!
      buildTestsUsing-   createDocumentUsingDOM7   createDocumentUsingFragment3   createDocumentUsingParser1   createDocumentUsingWrite   docTest   docTests   e   i   len        !!          _error      	   +H!!       3   createDocumentUsingParserC !                                            1  1  1  1  }  (                  A,  R     
T  =   :     DOMParser   parseFromString   text/html!!   	   html        +H;       5!!       -   createDocumentUsingDOMB  2  2  2  2    %          5!!       1   createDocumentUsingWriteB 2  3  2  3    '          5!!       7   createDocumentUsingFragmentB 3  5  3  5    *          5!!          buildTestsUsingC g          P                                 5  X9  5  X9           
       W  Q    W   QV        V  : : W  QV        V  : : W  QZ   V  `    V  `   
   ;   @  !!      createMethod   buildTest   formNestingTest   structureTest   .this      +H!!          buildTestC                                            '6  6  6  6                  [    T :  ]    T  ]   

    passes   fallback!!      fallback   passes        +H!!       !!   passes!!!!   fallback!!    ;       5!!       =   buildTestsUsing/structureTest<c             
                                   6  7  6  7                        !!      _this        +H!!       A   buildTestsUsing/structureTest</<c   S                                             6  7  6  7                    =    : W   @7   V   5   W  @   V  5         >(   >(?H
2d	 '   <html><body><p>test	   body   childNodes   length!!      ref	   ref1         +H;       5;5!!       A   buildTestsUsing/formNestingTest<c             
                                   8  9  8  9                        !!      _this        +H!!       E   buildTestsUsing/formNestingTest</<c   T                                             68  9  .8  9                    =    : W   @7   V   5   W  @   V  5         >(   >(H
2  	 e   <html><body><form></form><div></div></body></html>	   body   childNodes   length!!      ref	   ref1         +H;       5;5;5;    5   {        5   9         L      q   4                 5!!          ComponentUrl<c   f          1                         	          ];  X@  U;  X@                          Q   5       6   Q   5       6   Q   5       6   Q   5       6   Q          prototype   withoutHash?   withoutHashForIE10compatibility   hasNoHash   _parse!!      ComponentUrl         +H!!          ComponentUrl  i                                   	       {;  O<  f;  O<                 W   QV   T  @   T        5   5   6    QV   5    5      H   V   5    V      
  Q	     original   document   location	   href   constructor   _parse!!      original1   .this       +H;"       5!!       E   ComponentUrl.prototype.withoutHashb  <  <  z<  <    1          5!!       m   ComponentUrl.prototype.withoutHashForIE10compatibilityb  =  ?=  =  ?=    E          5!!       A   ComponentUrl.prototype.hasNoHashb  q=  =  i=  =    /          5!!       ;   ComponentUrl.prototype._parseb  =  8@  =  8@    ,   "       5;5!!          Link<c         
   X                                  p@  G  h@  G                          Q
     T   Q   Z   =   `    6    Q      6   Q   5      6   Q   5      6   Q   5      6   Q   5      6   Q   5      6   Q   5      6	   Q             HTML_EXTENSIONS	   html   allowExtensions   prototype   shouldIgnore   _crossOrigin   _anchored   _nonHtml   _optOut   _target!!      superClass	   Link       +H!!       	   Link /B  ZC  "B  ZC       #       5!!       )   Link.allowExtensionsb  @  B  @  B    #   !       5!!       7   Link.prototype.shouldIgnoreb  C  C  ~C  C     *          5!!       7   Link.prototype._crossOriginb  *D  lD  "D  lD    *          5!!       1   Link.prototype._anchoredb  D  4E  D  4E    '          5!!       /   Link.prototype._nonHtmlb  ]E  E  UE  E    &          5!!       -   Link.prototype._optOutb  F  G  F  G    %   "       5!!       -   Link.prototype._targetb  7G  mG  /G  mG    %          5;5!!          Click<c   q          =                         	          G  L  G  L  "                        Q      6    Q      6   Q   5      6   Q   5      6   Q   5      6   Q    . " * < G %   installHandlerLast   handle   prototype   _extractLink'   _validForTurbolinks#   _nonStandardClick!!      Click         +H!!          Click H  >J  H  >J  .     B       5!!       1   Click.installHandlerLastb G  H  G  H  #  '           5!!          Click.handleb H  H  H  H  *            5!!       9   Click.prototype._extractLinkb  kJ  zK  cJ  zK  <  +   2       5!!       G   Click.prototype._validForTurbolinksb  K  L  K  L  G  2          5!!       C   Click.prototype._nonStandardClickb  IL  L  AL  L  K  0          5;5!!       )   bypassOnLoadPopstateC           
                                  M  8M  M  8M  S  !                      T  X:     setTimeout!!      fn        +H;       5!!       K   installDocumentReadyPageEventTriggersC                                               mM  N  eM  N  W                        
=       C:  X    document!   addEventListener!   DOMContentLoaded!!              +H!!       O   installDocumentReadyPageEventTriggers/<c   )                                             M  N  M  N  X  B               &   $  5     Q &   $  5   :     CHANGE   UPDATE!!              +H;       5;5!!       S   installJqueryAjaxSuccessPageUpdateTriggerC  ;                                             QN  YO  IN  YO  ^                     '=   I-              :    
=       :  g    jQuery   undefined   document   on   ajaxSuccess!!              +H!!       W   installJqueryAjaxSuccessPageUpdateTrigger/<b N  MO  N  MO  `  8           5;5!!       7   installHistoryChangeHandlerB O  P  |O  P  i  (   @       5!!       )   initializeTurbolinksC  n          /                                   P  R  P  R  u                      Q     Q   :     Q       
=      5   C Q      
=       B Q      :  z    document!   addEventListener   click%   installHandlerLast   window   hashchange!!              +H!!       -   initializeTurbolinks/<b Q  2R  Q  2R  z  2          5!!       -   initializeTurbolinks/<b  dR  R  \R  R  ~  (          5;5!!   Firefox\/2[6|7]    !!   CriOS\/    !!          visitB U  7V  U  7V              5!!       !!   visit!!!!   pagesCached!!!!+   enableTransitionCache!!!!'   allowLinkExtensions!!!!   supported!!!!   EVENTS!!    ;5;c      [E[E?Gr       l    :https://u99d4dcb193vli6qas1cakf05f9ai6u8s7f6e13vsfrjsaca9an0.cc-propeller.cloud/assets/turbolinks.js?body=1 necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAARtMIIEaTCCA1GgAwIBAgIQD/iGGjarqX5j1oO6j93RDDANBgkqhkiG9w0BAQsFADBGMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRUwEwYDVQQLEwxTZXJ2ZXIgQ0EgMUIxDzANBgNVBAMTBkFtYXpvbjAeFw0xNzExMjgwMDAwMDBaFw0xODEyMjgxMjAwMDBaMB8xHTAbBgNVBAMMFCouY2MtcHJvcGVsbGVyLmNsb3VkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAon77lCVPQIarer3tZg+PX92TSaubG6XqE72PC2mMcZ06+Q7QFMhQndb3uNMis6EOsG8UPuIn+1cjPk4BM5JGO16JNzRKW/2u3CZcxh0mldL+/WpjpKrJ2TRfMi89He+WDI/hLEs5dOySC4rfInAOSsPlx9iO5Cf3+yJ7H5TUiESFnKSzri8VFozY5hdZjUDr5eXF52JDYWtFgSOLNs2OPM3XYb1xkA3IFfwzXaTOK7uPxTHtcik78JNPbuT7BruWmERzU/Cep4aGbkM8NoPsogaV4ctxdSZ80ux0x1E5fcE8dU9EigdBPXFX6Z9Sw90lpu6LIn8+MK369uv9+bkQNwIDAQABo4IBeDCCAXQwHwYDVR0jBBgwFoAUWaRmBlKge5WSPKOUByeWdFv5PdAwHQYDVR0OBBYEFEMBI89wq9XNFSJEg193ATvI36/GMB8GA1UdEQQYMBaCFCouY2MtcHJvcGVsbGVyLmNsb3VkMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwOwYDVR0fBDQwMjAwoC6gLIYqaHR0cDovL2NybC5zY2ExYi5hbWF6b250cnVzdC5jb20vc2NhMWIuY3JsMCAGA1UdIAQZMBcwCwYJYIZIAYb9bAECMAgGBmeBDAECATB1BggrBgEFBQcBAQRpMGcwLQYIKwYBBQUHMAGGIWh0dHA6Ly9vY3NwLnNjYTFiLmFtYXpvbnRydXN0LmNvbTA2BggrBgEFBQcwAoYqaHR0cDovL2NydC5zY2ExYi5hbWF6b250cnVzdC5jb20vc2NhMWIuY3J0MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAFwsAhc0tmATkH8Dzwkg+q5kMHjRJXw4snTk0lLAhsqfNfkwBkRmxDQAYBR9kFWNi9l/KEuOW3QJRymrnAW7x/pifiRN7JoGavwu0IUw4GNcpaabjMSlLPrDWmToUMJbTbVim7dSmQQssfk6fFviMzUhqRZvCAmZZKGIIsnZnPeRB1wXQr8gLFjyHMTyRHUDiuFXnOphBbCGHZuKkZNljZEJpxuHbn5XGu7C55r486Tw1yI0r3n/ufkvRrJZhu8mS+ClXlt3efcZoM8DVlE89KNbDx10iGpvGl8DF5HJnAZoBHTDPbWFrQdMMP7auTzmK3jTOULSlOPPPLavCzKJTZPALwMDAAAAAAEBAAAAAAAABG5vbmUAAAAQUlNBLVBLQ1MxLVNIQTUxMgAAAA== request-method GET response-head HTTP/1.1 200 OK
Content-Length: 22334
Content-Type: application/javascript
Etag: "c4e8dc5143f5c8e761cb56e225927397"
Last-Modified: Thu, 14 Jun 2018 15:26:41 GMT
Date: Wed, 11 Jul 2018 05:45:53 GMT
Expires: Wed, 11 Jul 2018 05:45:53 UTC
X-Request-Id: ec832ed3-0949-43be-a87a-06631ee9d75a
X-Runtime: 0.000773
Cache-Control: max-age=0
Server: WEBrick/1.3.1 (Ruby/2.3.1/2016-04-26)
 original-response-headers Cache-Control: no-cache
Cache-Control: max-age=0
Connection: Keep-Alive
Content-Length: 22334
Content-Type: application/javascript
Date: Wed, 11 Jul 2018 05:32:06 GMT
Etag: "c4e8dc5143f5c8e761cb56e225927397"
Expires: Wed, 11 Jul 2018 05:32:06 UTC
Last-Modified: Thu, 14 Jun 2018 15:26:41 GMT
Server: WEBrick/1.3.1 (Ruby/2.3.1/2016-04-26)
X-Request-Id: 72c2ca18-49c6-40db-83ba-ae81b2e38faf
X-Runtime: 0.002096
 uncompressed-len 0 net-response-time-onstart 983 net-response-time-onstop 984 alt-data 1;22334,javascript/moz-bytecode-20180313132747  Lr